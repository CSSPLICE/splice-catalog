<!DOCTYPE html>
<html>
  <%- include('../partials/head') -%>
  <link rel="stylesheet" href="/css/style.css">
  <%- include('../partials/header') -%>

  <body>
    <div class="container search-sidebar-layout">

      <%- include('../partials/filter') -%>

      <%
        const q = (typeof query === 'string') ? query : '';
        const selectedFeatures = Array.isArray(features)
          ? features
          : (features ? [features] : []);
      %>

      <main class="search-content">

        <div style="margin-bottom: 1rem;">
          <button id="downloadResultsBtn" class="btn btn-primary">
            Download results
          </button>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
          <div id="recordCount" class="fw-semibold text-muted">
            Showing 0â€“0 of 0 results
          </div>

          <div>
            <label for="itemsPerPage" class="me-2">Items per page:</label>
            <select id="itemsPerPage" class="form-select d-inline-block w-auto">
              <option value="10">10</option>
              <option value="25" selected>25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
        </div>

        <%- include('../pages/table', { items: results || [], isSearchPage: true }) %>

        <div class="pagination"></div>
      </main>
    </div>

    <script>
      window.allItems = <%- JSON.stringify(results || []) %>;
    </script>

    <script src="/js/searchparams.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  </body>

  <%- include('../partials/footer') -%>
</html>
